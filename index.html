<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>القرآن الكريم</title>
  <link rel="stylesheet" href="index.css">
  <link rel="manifest" href="manifest.json">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran:wght@400&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <meta name="theme-color" id="theme-color-meta" content="#F8F5E9">
<link rel="stylesheet" href="/index.css">
</head>
<body class="light-mode">

  <div id="app-container">
    <!-- View: Reader -->
    <div id="reader-view" class="view">
      <header class="top-bar">
        <button id="index-btn" class="icon-btn" aria-label="الفهرس">
          <span class="material-symbols-outlined">menu</span>
        </button>
        <h1 id="surah-title" class="top-bar-title">القرآن الكريم</h1>
        <div>
          <button id="play-btn" class="icon-btn" aria-label="تشغيل الصوت">
            <span class="material-symbols-outlined">play_circle</span>
          </button>
          <button id="bookmark-btn" class="icon-btn" aria-label="إضافة علامة مرجعية">
            <span class="material-symbols-outlined">bookmark</span>
          </button>
          <button id="search-btn" class="icon-btn" aria-label="بحث">
            <span class="material-symbols-outlined">search</span>
          </button>
          <button id="settings-btn" class="icon-btn" aria-label="الإعدادات">
            <span class="material-symbols-outlined">settings</span>
          </button>
        </div>
      </header>
      <main id="reader-content-wrapper" class="reader-content-wrapper">
        <div id="loading-indicator" class="loading-indicator">
            <div class="spinner"></div>
        </div>
        <div id="reader-content" class="reader-content">
            <!-- Quran text will be rendered here -->
        </div>
        <div id="reader-content-transition" class="reader-content hidden">
            <!-- Quran text for the next page will be rendered here for smooth transition -->
        </div>
        <div id="ayah-action-menu" class="ayah-action-menu hidden">
            <button id="ayah-action-play" class="icon-btn" aria-label="تشغيل الآية"><span class="material-symbols-outlined">play_arrow</span></button>
            <button id="ayah-action-tafsir" class="icon-btn" aria-label="تفسير الآية"><span class="material-symbols-outlined">menu_book</span></button>
            <button id="ayah-action-note" class="icon-btn" aria-label="إضافة ملاحظة"><span class="material-symbols-outlined">edit_note</span></button>
            <button id="ayah-action-copy" class="icon-btn" aria-label="نسخ الآية"><span class="material-symbols-outlined">content_copy</span></button>
            <button id="ayah-action-share" class="icon-btn" aria-label="مشاركة الآية"><span class="material-symbols-outlined">share</span></button>
        </div>
      </main>
      <footer class="reader-footer">
        <div class="page-info">
            <span id="page-number-footer"></span>
            <span id="juz-number-footer"></span>
        </div>
      </footer>
    </div>

    <!-- View: Index -->
    <div id="index-view" class="view hidden">
      <header class="top-bar">
        <button id="close-index-btn" class="icon-btn" aria-label="إغلاق الفهرس">
          <span class="material-symbols-outlined">arrow_forward</span>
        </button>
        <h1 class="top-bar-title">القرآن الكريم</h1>
        <div style="width: 44px;"></div> <!-- Placeholder for alignment -->
      </header>
      <nav class="tabs">
        <button class="tab-btn active" id="surah-tab-btn">سورة</button>
        <button class="tab-btn" id="juz-tab-btn">الجزء</button>
        <button class="tab-btn" id="bookmarks-tab-btn">المرجعيات</button>
        <button class="tab-btn" id="notes-tab-btn">الملاحظات</button>
        <button class="tab-btn" id="help-tab-btn">مساعدة</button>
      </nav>
      <main id="index-content" class="index-content">
        <!-- Surah/Juz/Bookmarks/Notes list will be rendered here -->
      </main>
    </div>

    <!-- View: Settings -->
    <div id="settings-view" class="view hidden">
        <header class="top-bar">
            <button id="close-settings-btn" class="icon-btn" aria-label="إغلاق الإعدادات">
              <span class="material-symbols-outlined">arrow_forward</span>
            </button>
            <h1 class="top-bar-title">الإعدادات</h1>
            <div style="width: 44px;"></div> <!-- Placeholder for alignment -->
        </header>
        <main class="settings-content">
            <div class="settings-section">
                <h2 class="settings-heading">المظهر</h2>
                <div class="setting-item">
                    <label for="dark-mode-toggle">القراءة الليلية</label>
                    <div class="toggle-switch">
                        <input type="checkbox" id="dark-mode-toggle">
                        <span class="slider"></span>
                    </div>
                </div>
                 <div class="setting-item">
                    <label for="font-size-slider">حجم الخط</label>
                    <div class="slider-container">
                        <span>صغير</span>
                        <input type="range" id="font-size-slider" min="2" max="4" step="0.1" value="2.5">
                        <span>كبير</span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- View: Search -->
    <div id="search-view" class="view hidden">
        <header class="top-bar">
            <button id="close-search-btn" class="icon-btn" aria-label="إغلاق البحث">
              <span class="material-symbols-outlined">arrow_forward</span>
            </button>
            <h1 class="top-bar-title">البحث في القرآن</h1>
            <div style="width: 44px;"></div> <!-- Placeholder for alignment -->
        </header>
        <div class="search-input-container">
            <input type="search" id="search-input" placeholder="ابحث عن آية..." autocomplete="off">
        </div>
        <div id="search-results-meta" class="search-results-meta hidden"></div>
        <main id="search-results-container" class="search-results-container">
            <!-- Search results will be rendered here -->
        </main>
    </div>

    <!-- Audio Player -->
    <div id="audio-player" class="audio-player">
        <div class="audio-player-content">
            <div class="reciter-selection">
                <img id="reciter-image" class="reciter-image" alt="صورة القارئ">
                <select id="reciter-select"></select>
            </div>
            <div class="audio-controls">
                <button id="audio-prev-btn" class="icon-btn"><span class="material-symbols-outlined">skip_previous</span></button>
                <div id="play-pause-container" class="play-pause-container">
                    <button id="audio-play-pause-btn" class="icon-btn"><span class="material-symbols-outlined">play_circle</span></button>
                    <div class="spinner"></div>
                </div>
                <button id="audio-next-btn" class="icon-btn"><span class="material-symbols-outlined">skip_next</span></button>
            </div>
            <div id="audio-info" class="audio-info">
                اختر قارئًا للبدء
            </div>
        </div>
    </div>
    <audio id="audio-element" class="hidden"></audio>

     <!-- Tafsir Modal -->
    <div id="tafsir-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <select id="tafsir-select" class="tafsir-select"></select>
                <button id="close-tafsir-modal" class="icon-btn"><span class="material-symbols-outlined">close</span></button>
            </div>
            <div id="tafsir-body" class="modal-body">
              <div id="tafsir-text"></div>
            </div>
        </div>
    </div>

    <!-- Note Modal -->
    <div id="note-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ملاحظات على الآية</h3>
                <button id="close-note-modal" class="icon-btn"><span class="material-symbols-outlined">close</span></button>
            </div>
            <div class="modal-body">
                <textarea id="note-textarea" placeholder="اكتب ملاحظاتك هنا..."></textarea>
            </div>
            <div class="modal-footer">
                <button id="save-note-btn">حفظ الملاحظة</button>
            </div>
        </div>
    </div>

  </div>

  <script type="module" src="index.tsx"></script>
<script type="module" src="/index.tsx"></script>
</body>
</html>